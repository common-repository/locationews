!function(w){w(function(){if("object"==typeof google&&"object"==typeof google.maps){if("undefined"!=typeof locationews_map_init){var a="",e="",t=locationews_map_init.locationews_meta,o=locationews_map_init.locationews_options,l=locationews_map_init.locationews_user,n=(e=t.latlng&&0!==t.latlng.length?t.latlng.split(","):l.location&&0!==l.location.length?l.location.split(","):o.location.split(","))[0],i=e[1],s=new google.maps.LatLng(n,i),r={zoom:0!==locationews_map_init.zoom.length?parseInt(locationews_map_init.zoom):9,center:s,disableDoubleClickZoom:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!0,gestureHandling:"greedy",streetViewControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5 "}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#e05a5a"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#e05a5a"},{saturation:-40},{lightness:30}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9d9d9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},c=n+","+i;t.latlng!==c&&w("#locationews-location").val(n+","+i);var p=new google.maps.Map(document.getElementById("locationews-google-map"),r),g=new google.maps.Geocoder;if(u(s,"",p,g),p.addListener("dblclick",function(e){u(e.latLng,"",p,g)}),"object"!=typeof google.maps.places)w("#locationews-pac-input").hide();else{var y=document.getElementById("locationews-pac-input"),m=new google.maps.places.SearchBox(y);p.controls[google.maps.ControlPosition.TOP_CENTER].push(y),p.addListener("bounds_changed",function(){m.setBounds(p.getBounds())});var d=[];m.addListener("places_changed",function(){var e=m.getPlaces();if(0!=e.length){d.forEach(function(e){e.setMap(null)}),d=[];var o=new google.maps.LatLngBounds;e.every(function(e,t){if(e.geometry)return u(e.geometry.location,"",p,g),e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location),!1}),p.fitBounds(o)}})}0!==w("#locationews-pac-input").val().length&&w("#locationews-pac-input").removeAttr("placeholder"),w("#locationews-pac-input").focus(function(){w(this).data("oldvalue",w(this).val()),w(this).val(""),w(this).attr("placeholder",locationews_map_init.map_search_placeholder)}).blur(function(){""==w(this).val()&&w(this).val(w(this).data("oldvalue"))}),w(window).keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1}),w("#locationews-location").keyup(function(){var e=w(this);e.val(e.val().replace(/[^\d.,]/g,""))})}}else alert("Google Maps API not loaded.");function u(e,t,o,l){a?(a.setPosition(e),w("#locationews-location").val(e.lat()+","+e.lng())):a=new google.maps.Marker({position:e,map:o,title:"",draggable:!0,icon:0!==locationews_map_init.icon.length?locationews_map_init.icon:locationews_map_init.plugin_url+"img/icon-small.png"}),a.addListener("drag",function(e){w("#locationews-location").val(e.latLng.lat()+","+e.latLng.lng())}),a.addListener("dragend",function(e){w("#locationews-location").val(e.latLng.lat()+","+e.latLng.lng()),f(l,o,e.latLng.lat(),e.latLng.lng())}),f(l,o,e.lat(),e.lng())}function f(e,t,o,l){if(void 0!==o&&void 0!==l)var a={lat:parseFloat(o),lng:parseFloat(l)};else{var n=w("#locationews-location").val().split(",",2);a={lat:parseFloat(n[0]),lng:parseFloat(n[1])}}e.geocode({location:a},function(e,t){"OK"===t&&e[0]?(w("#locationews-pac-input").val(e[0].formatted_address),w("#locationews-pac-input").removeAttr("placeholder")):w("#locationews-pac-input").val("")})}})}(jQuery);